apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
    name: k8s-gateway
    namespace: dns
spec:
    interval: 15m
    chart:
        spec:
            chart: k8s-gateway
            version: 2.0.1
            sourceRef:
                kind: HelmRepository
                name: k8s-gateway
                namespace: flux-system
    maxHistory: 3
    install:
        createNamespace: true
        remediation:
            retries: 3
    upgrade:
        cleanupOnFail: true
        remediation:
            retries: 3
    uninstall:
        keepHistory: false
    values:
        fullnameOverride: k8s-gateway
        domain: ENC[AES256_GCM,data:wDF9Qkgpd21b/dtDqmFB65UWTz8g5mXvC4b8sUNRWQ==,iv:ZCv60ivBbcbWrV06HYhmNzfZ2oMPlJ7+bVxQJQZdT2U=,tag:oQYThticDm4txQOYNXEVRg==,type:str]
        ttl: 1
        service:
            type: LoadBalancer
            port: 53
            loadBalancerIP: ENC[AES256_GCM,data:0KnSD1+LFM7VQp4=,iv:0ZyHEddRpwIGFdxmW6maIrLi35Rxz90mxKJRaldc9z8=,tag:1VXEmAy1ZHdxr1lfSwjTeQ==,type:str]
            externalIPs:
                - ENC[AES256_GCM,data:xjxb5MzVEXG6yvM=,iv:pczVgOt1IGbLY7zQaXCwikN4ZmHmDyl3kCkYArzGjLA=,tag:qyC7nn82FoYTuotsXIuxWA==,type:str]
            externalTrafficPolicy: Local
        extraZonePlugins:
            - name: log
            - name: errors
            # Serves a /health endpoint on :8080, required for livenessProbe
            - name: health
              configBlock: lameduck 5s
            # Serves a /ready endpoint on :8181, required for readinessProbe
            - name: ready
            # Serves a /metrics endpoint on :9153, required for serviceMonitor
            - name: prometheus
              parameters: 0.0.0.0:9153
            - name: forward
              parameters: . /etc/resolv.conf
            - name: loop
            - name: reload
            - name: loadbalance
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1u57l4s400gqstc0p485j4646cemntufr0pcyp32yudklsp90xpmszxvnkj
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSAvM0xxL05pVERKU0UxSVZQ
            S09VWWJuWnJEQjRSZmpNdjBrMG1JSTRNT0JRCmtRQWdTVWt2Si9xaVRHSUlVWlZF
            dko5c2Z4aGlqWUxaQXUrZFVGdm1CaEkKLS0tIFhyVEREdzdqZm5HcmVyeVNIcmVo
            K3lzYzZCaHRubzJ6VzVIeWJaTitFVkkKmLcRfQW/1SAamvAsX43EKGG+4HfAdlsZ
            iNs2wWCAhAjUligg/wqlP03M3tK+nxfUxDL2DoLdXQN05CRIp5kAFg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-02-21T20:25:11Z"
    mac: ENC[AES256_GCM,data:pyb3qDdaVxtWRGiGxQJkRgTUjAeEZtDDidjX/uc2Hwm4smpPzv+0ahcOwzSG8mt4gYrd2Dc43lpDWg7bx0tmT2f7+9oOIwz227ZFUSCpB6gtH48HeTmKU9BqNrVfsUdi/c4qCfwm5bck5YuIIvPydCL0vOsMnhRWKis9Elx2l8c=,iv:wat7/Nfv/1Vcr6dKIUipcHp6nDKLbjg0ioeEVnkvAC0=,tag:P94myA/2TNyrcYi+RzvQhg==,type:str]
    pgp:
        - created_at: "2023-02-21T20:25:11Z"
          enc: |
            -----BEGIN PGP MESSAGE-----

            hF4DAAAAAAAAAAASAQdAq3YAxVy8FTWzFlVM9i2FaHa6C0cELWxxxSNq0bnJ5xIw
            54WAUFWH6GZMiMD3xl3LP5Y7fTo+Q6QBp3rcHi4Lazpo0MgLzGRvyAIXExed/nKe
            0l4B1mAUV4/JwD877ulCLmtnoSBZw6xtQUmKbfiAEKQQpGGwZ0zgHqCV9a8yv6HY
            iyVT8c0fybTVEX8x47TzUMzGkNM92koUYqIwvzAvziC1KG/MfUdbJuJD9wzGz1NJ
            =x71a
            -----END PGP MESSAGE-----
          fp: 31E70E5BC80C58AFF5DD649921AC5A1AC6E5B7F2
    encrypted_regex: ^(data|stringData|domain|loadBalancerIP|externalIPs)$
    version: 3.7.3
