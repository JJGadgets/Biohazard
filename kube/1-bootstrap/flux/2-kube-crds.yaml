---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2

# not GitRepository since we're using single repo with both bootstrap path and multiple CD paths
kind: Kustomization

# what this manifest will be named and where will it be deployed to
metadata:
  name: 2-kube-crds
  # only manifest is deployed in flux-system namespace so Flux can reference it, resources in the Git repo path won't be deployed here
  namespace: flux-system

spec:
  sourceRef:
    kind: GitRepository
    # for single repo with both bootstrap path and multiple paths to CD, use repo already known to Flux by referring to it using "flux-system", so the Source of Truth = repo Flux already watches for its bootstrap and state
    name: flux-system
  # path of repo to watch
  path: ./kube/2-kube-crds

  # check source every minute
  interval: 1m0s

  prune: false
  # wait: true
