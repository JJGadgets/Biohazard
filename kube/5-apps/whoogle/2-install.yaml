apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
    name: whoogle
    namespace: whoogle
spec:
    interval: 15m
    chart:
        spec:
            chart: app-template
            version: 1.2.1
            sourceRef:
                kind: HelmRepository
                name: bjw-s
                namespace: flux-system
    maxHistory: 3
    install:
        createNamespace: true
        remediation:
            retries: 3
    upgrade:
        cleanupOnFail: true
        remediation:
            retries: 3
    uninstall:
        keepHistory: false
    values:
        controller:
            strategy: RollingUpdate
        fullNameOverride: whoogle
        image:
            repository: docker.io/benbusby/whoogle-search
            tag: 0.8.1
        env:
            HTTPS_ONLY: 0
            WHOOGLE_CONFIG_THEME: dark
            WHOOGLE_CONFIG_SAFE: 0
            WHOOGLE_CONFIG_STYLE: 'body {max-width: 100% !important} :root { --whoogle-dark-logo: #6E6C7E; --whoogle-dark-page-bg: #1E1E2E; --whoogle-dark-element-bg: #302D41; --whoogle-dark-text: #D9E0EE; --whoogle-dark-contrast-text: #F2CDCD; --whoogle-dark-secondary-text: #988BA2; --whoogle-dark-result-bg: #302D41; --whoogle-dark-result-title: #F5E0DC; --whoogle-dark-result-url: #F5E0DC; --whoogle-dark-result-visited: #C9CBFF; } #whoogle-w { fill: #96CDFB; } #whoogle-h { fill: #F28FAD; } #whoogle-o-1 { fill: #FAE3B0; } #whoogle-o-2 { fill: #96CDFB; } #whoogle-g { fill: #ABE9B3; } #whoogle-l { fill: #F28FAD; } #whoogle-e { fill: #FAE3B0; }'
            WHOOGLE_CONFIG_URL: ENC[AES256_GCM,data:y98d0MskA9RIeBgdTqaJ+g==,iv:DH27Ul8u/Wzocvu0V39T0euNnKn00H+LawcI14bMS24=,tag:tHqhzL7NyoTvTwMGaSIkRA==,type:str]
            WHOOGLE_CONFIG_GET_ONLY: 1
            WHOOGLE_CONFIG_VIEW_IMAGE: 1
            WHOOGLE_CONFIG_DISABLE: 1
        service:
            main:
                ports:
                    http:
                        port: 5000
        ingress:
            main:
                enabled: true
                ingressClassName: nginx
                hosts:
                    - host: ENC[AES256_GCM,data:J2+NHUGZTac=,iv:4BSxTXjI0uxFxFPVBrX7+KK0qRn7AwvJV2CSTfq43Kw=,tag:YEcHbXmynBkA/Iw2spgrBg==,type:str]
                      paths:
                        - path: ENC[AES256_GCM,data:vA==,iv:VefsQzuQDWu5aTYrP2HFn8PvASYgVKJ2tnJWXNEGeTo=,tag:mIlAVcF4TH6UZqwo9/kXsQ==,type:str]
                          pathType: ENC[AES256_GCM,data:hqs8ikWH,iv:ijnU5cRJa6bxMnhlrAbNEqUsYoXhZ4htDDxcGtFh/60=,tag:YEQ5JO+TrJqmPQDP+19Q/A==,type:str]
                tls:
                    - hosts:
                        - ENC[AES256_GCM,data:gg+11Sa7UXM=,iv:5u9CfStl7N2pd+gG4L6K6PRzZdIsAjWIClr8bzaZhjI=,tag:RmZS51hSDK1rtUXA8NLTXg==,type:str]
        resources:
            requests:
                cpu: 5m
                memory: 100Mi
            limits:
                memory: 250Mi
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1xl3fcwdw56k73lraxsjhde4ygwn7jw0js5l5qw7vsp54vc5czuwstcejxu
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSAwaTlXUXM2Z3J0VVd0ZWY3
            SGxKUVZLL21GYzJOWCs1b0MvNkVld2R1YUMwClVkS2VXdTRYd2xGdmQwOGJ3MU54
            YU1aRDBkcWd1bythc2RtOFlKOHVRNXMKLS0tIFhxMkdNN25pWVcxVy9uMFZIaTdr
            R1lZSmVtNnBMQUluUjlHdFdzekpPcm8KYjTlTyaIbkkMkASpmAdcn5GTb67wPJC6
            Gijco/AxH2iSK0wsDF7LKTgsf5/3hL4UV0+QTZGa+PQcaLamIkheew==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-02-01T02:54:44Z"
    mac: ENC[AES256_GCM,data:AUB3j2f5zf2FrcpkxsOsMKHMducH2aPdBnvYQhC2Nuh/h+xmWvJh/MaYnTJjWsijczvOQBsB9VN4gzpo1Qbf9QKfFy1MUY2runel21FoIUMIpz3RpR8jvhNhLX3CUxTOzr7+3oxb9Am937gIQiGYRPbuNgWEBt7gyvx07ry43bA=,iv:zwIvFvi71qdov/PV9l3oC9m8sEsRREXdgES5Fh6dwDE=,tag:sqyjIT6K+2aGsiVBUutnYA==,type:str]
    pgp:
        - created_at: "2023-01-31T11:55:47Z"
          enc: |
            -----BEGIN PGP MESSAGE-----

            hF4DAAAAAAAAAAASAQdA9FbgYQCCyh7cOgvtolUZ7Gn7serGoRyv2eXeF7LFH2Uw
            2Y9K+RQa1Py/svPmS/aaH7h9KLSYNL4QaaizF5hCAFg0F0xpCDNCz/btzzMJZvyv
            0lwByii6uvSXszmwS/Wx/zz8jUQ0xiQLaTlwgS3fGjVKlWRYklO/wmGRmVTVdnBT
            2AfNM7BuhxLcZNIcLVE6XeJ7pnPoT6hDGTI0MvWj0RonoeZOuSPKI4UflCUY+A==
            =szsK
            -----END PGP MESSAGE-----
          fp: 31E70E5BC80C58AFF5DD649921AC5A1AC6E5B7F2
    encrypted_regex: ^(hosts|host|WHOOGLE_CONFIG_URL)$
    version: 3.7.3
