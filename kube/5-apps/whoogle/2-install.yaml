apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
    name: whoogle
    namespace: whoogle
spec:
    interval: 15m
    chart:
        spec:
            chart: app-template
            version: 1.2.1
            sourceRef:
                kind: HelmRepository
                name: bjw-s
                namespace: flux-system
    maxHistory: 3
    install:
        createNamespace: true
        remediation:
            retries: 3
    upgrade:
        cleanupOnFail: true
        remediation:
            retries: 3
    uninstall:
        keepHistory: false
    values:
        controller:
            strategy: RollingUpdate
        fullNameOverride: whoogle
        image:
            repository: docker.io/benbusby/whoogle-search
            tag: 0.8.1
        env:
            HTTPS_ONLY: 0
            WHOOGLE_CONFIG_THEME: dark
            WHOOGLE_CONFIG_SAFE: 0
            WHOOGLE_CONFIG_STYLE: 'body {max-width: 100% !important} :root { --whoogle-dark-logo: #6E6C7E; --whoogle-dark-page-bg: #1E1E2E; --whoogle-dark-element-bg: #302D41; --whoogle-dark-text: #D9E0EE; --whoogle-dark-contrast-text: #F2CDCD; --whoogle-dark-secondary-text: #988BA2; --whoogle-dark-result-bg: #302D41; --whoogle-dark-result-title: #F5E0DC; --whoogle-dark-result-url: #F5E0DC; --whoogle-dark-result-visited: #C9CBFF; } #whoogle-w { fill: #96CDFB; } #whoogle-h { fill: #F28FAD; } #whoogle-o-1 { fill: #FAE3B0; } #whoogle-o-2 { fill: #96CDFB; } #whoogle-g { fill: #ABE9B3; } #whoogle-l { fill: #F28FAD; } #whoogle-e { fill: #FAE3B0; }'
            WHOOGLE_CONFIG_URL: ENC[AES256_GCM,data:fi3dlJcjpAVIGmLbdRb/Nw==,iv:jiEyZXKBWb8OQkWawS3D1UlTc0Wmt8TfWJqDpSR2LDU=,tag:9U895Ic6MTD1fXQCu1QziQ==,type:str]
            WHOOGLE_CONFIG_GET_ONLY: 1
            WHOOGLE_CONFIG_VIEW_IMAGE: 1
            WHOOGLE_CONFIG_DISABLE: 1
            WHOOGLE_CONFIG_TOR: 0
            WHOOGLE_TOR_SERVICE: 0
        dnsPolicy: None
        dnsConfig:
            options:
                - name: ndots
                  value: "1"
            nameservers:
                - ENC[AES256_GCM,data:Q7+Iq5/jbf0=,iv:fSQ9ek9I1vH/nmd2u5wQ7MQzoWrUdW+LT1nGfmM5IxQ=,tag:umC/f280X2YbOVgZbHOrAw==,type:str]
        service:
            main:
                ports:
                    http:
                        port: 5000
        ingress:
            main:
                enabled: true
                primary: true
                ingressClassName: internal
                nameOverride: internal
                hosts:
                    - host: ENC[AES256_GCM,data:oM+w4Mv9sWE=,iv:L/pmSgOAtDQIrPeJL1foB5HhvhmJQAGs0XMvw7aJJQA=,tag:wGpp4GJkzY8dMKJ7WwbVEg==,type:str]
                      paths:
                        - path: ENC[AES256_GCM,data:Vw==,iv:TWNK/+w4wV3cCcqCzsR8BdpCOeWvqOJgvdnC/DNS5vU=,tag:BTQ/7vJiCpVcTwlCaNDowQ==,type:str]
                          pathType: ENC[AES256_GCM,data:lOtyaBCQ,iv:1XgDu3nNYK9pwyTuw+hyXQqNV33nWEwHiZ2BgkqWEmY=,tag:5ny1eKcECyVmO+UIlaBNKg==,type:str]
                tls:
                    - hosts:
                        - ENC[AES256_GCM,data:0lngFtyYrp0=,iv:7ohv94qGZwkWx/rMxW2EYSAO+tP4mE33dsiyB+WZfgI=,tag:ORz6fhoh2tVUv0ZpCH/cPw==,type:str]
            external:
                enabled: true
                ingressClassName: external
                nameOverride: external
                hosts:
                    - host: ENC[AES256_GCM,data:QRPPDblDSJ8=,iv:HrlZUVG9SpAoW5Ft98Aaek1fIDxepAr04R0Qvcke+Dk=,tag:YbEQYOorUvMaW3Xv1dnueA==,type:str]
                      paths:
                        - path: ENC[AES256_GCM,data:7w==,iv:SxB5jFv78Rr2rN6ZSlB3rHcpZpt+onam3de3rK9yYYE=,tag:jG0ZsQJTAYILMD7KMe7CDw==,type:str]
                          pathType: ENC[AES256_GCM,data:Ddl8tfRx,iv:ogyiNFjhFS+C9Kkz48O/3U7zNginI2F57h+UBvLrorI=,tag:A82AMYDg8AqAxUnrmHV9Gw==,type:str]
                tls:
                    - hosts:
                        - ENC[AES256_GCM,data:t5RyUHCU0DE=,iv:5WAhJr75yOM4SuiRrKVGNngx3rTKcM4eqD9gJ3AmWRw=,tag:vHAQewNYYqu5R/N1TqbYmA==,type:str]
        resources:
            requests:
                cpu: 5m
                memory: 100Mi
            limits:
                memory: 250Mi
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1xl3fcwdw56k73lraxsjhde4ygwn7jw0js5l5qw7vsp54vc5czuwstcejxu
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBHOS9Qa2paU21Id1FmMGhG
            ZXRkNk1NYmNNbGtJSkNGR3JKdGh2STNLL2s4CjdldDJpNVpJbjR1UnRPeDJjVURN
            RUdrTFNpTUZBOXhEM1Y4c24xd3JqUVkKLS0tIGlNbzZaY0g0RUdyd3U5Y3VSUDVu
            U0RucGlTdjJ5eThQQ3M5N0NlVXo3ZFEKWAyldwRjR/Ep5eLngZnRFLbRfo6hBxz/
            tDQUcbgG+x/hmciKhxEHxtFLrHsOZZSKn5/9EmtRixxnl+KnknJP3g==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-02-15T23:52:35Z"
    mac: ENC[AES256_GCM,data:YtrmjeJkSxO1tnA0h8XyzH8MWYlgsoE63kzZKkmLUbB7SZhyEQEfEqsqtymv+nkqH9js6Yi9DWI9u0I785RigFvT8NUI7TtxoBXtH6YhiM7cL2oE33aHBw+KENFR96aM9lY7eLq8Mpvih/pduwkJ2SFq7v6OPvDxqZMidklMWaI=,iv:KccvRYWmTdOJCCbimk7yBOrCJUunMUyzwHZGSVBNKsQ=,tag:Hd2VQm+Fq5C1D846SGpE/w==,type:str]
    pgp:
        - created_at: "2023-02-01T10:34:08Z"
          enc: |
            -----BEGIN PGP MESSAGE-----

            hF4DAAAAAAAAAAASAQdAr6teP9qapjcDBwGS9e4BMYmaF40qQtX+az00OUL0KDww
            V8w6ZuITDYBJWHuG9J00YFyQRODtI+hJexuIb1hEPLKpBjggICKFtUSb1UiZptFx
            0l4BmzkQ8Gb2DA1oPDIHksb/Oxv2KPUbpbQXXz+D7qiDQBFNJazZ84iSWxV4aIad
            Wly2A2LvIce8oRdjCOJcYLi5T0pAUpnJFTKI6aruTkmk/D5TnKssN5ehGCDelCPS
            =pMTn
            -----END PGP MESSAGE-----
          fp: 31E70E5BC80C58AFF5DD649921AC5A1AC6E5B7F2
    encrypted_regex: ^(hosts|host|WHOOGLE_CONFIG_URL|nameservers)$
    version: 3.7.3
