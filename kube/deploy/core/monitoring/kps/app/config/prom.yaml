---
prometheus:
  ingress:
    enabled: true
    ingressClassName: nginx
    hosts: &hostprom ["${APP_DNS_PROMETHEUS}"]
    tls: [hosts: *hostprom]
    paths: ["/"]
    pathType: Prefix
  prometheusSpec:
    scrapeInterval: "5s"
    scrapeTimeout: "60s"
    replicas: 3
    retention: 14d
    retentionSize: 30GB
    walCompression: true
    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: local
          resources:
            requests:
              storage: 35Gi
    enableAdminAPI: true
    ruleSelectorNilUsesHelmValues: false
    serviceMonitorSelectorNilUsesHelmValues: false
    podMonitorSelectorNilUsesHelmValues: false
    probeSelectorNilUsesHelmValues: false
    scrapeConfigSelectorNilUsesHelmValues: false
    resources:
      requests:
        cpu: 150m
        memory: 2048M
      limits:
        memory: 8192M
    topologySpreadConstraints:
      - maxSkew: 1
        topologyKey: "kubernetes.io/hostname"
        whenUnsatisfiable: DoNotSchedule
        labelSelector:
          matchLabels:
            prometheus: "kps"
